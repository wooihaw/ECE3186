//main.cpp for FRDM-KL25Z on Mbed
#include "mbed.h"

const float frequency[] = { 660, 0, 660, 0, 660, 0, 510, 0, 660, 0, 770, 0, 380, 0,
                        510, 0, 380, 0, 320, 0, 440, 0, 480, 0, 450, 0, 430, 0, 
                        380, 0, 660, 0, 760, 0, 860, 0, 700, 0, 760, 0, 660, 0, 520, 0, 580, 0, 480, 0,
                        510, 0, 380, 0, 320, 0, 440, 0, 480, 0, 450, 0, 430, 0, 
                        380, 0, 660, 0, 760, 0, 860, 0, 700, 0, 760, 0, 660, 0, 520, 0, 580, 0, 480, 0}; // frequency array 
const float beat[] = { 100, 150, 100, 300, 100, 300, 100, 100, 100, 300, 100, 550, 100, 575,
                   100, 450, 100, 400, 100, 500, 100, 300, 80, 330, 100, 150, 100, 300,
                   100, 200, 80, 200, 50, 150, 100, 300, 80, 150, 50, 350, 80, 300, 80, 150, 80, 150, 80, 500, 
                   100, 450, 100, 400, 100, 500, 100, 300, 80, 330, 100, 150, 100, 300,
                   100, 200, 80, 200, 50, 150, 100, 300, 80, 150, 50, 350, 80, 300, 80, 150, 80, 150, 80, 500} ; // beat array 

PwmOut buzzer(D7) ;

int main() {
    while (1) { 
        for (int i=0; i<82; i++) {
            if (frequency[i] == 0) {
                buzzer = 0;
            } else { 
                buzzer.period (1/(frequency[i] ) ) ;  // set PWM period 
                buzzer = 0.5 ;  // set duty cycle 
            }
            wait_ms( beat[ i ] ) ;  // hold for beat period 
        }
        buzzer = 0;
        wait_ms(2000);     
    }
}
